# 음성 받아쓰기 프로그램 개발 계획

## 프로젝트 개요
- **목적**: PC 환경에서 음성을 텍스트로 변환하는 프로그램
- **STT 엔진**: OpenAI Whisper
- **UI**: 시스템 트레이 아이콘만 (별도 창 없음)
- **활성화**: Ctrl+Alt+Space 키를 누르고 있는 동안만 녹음
- **대상 플랫폼**: Windows, Linux, macOS

## 개발 단계별 TODO

### 1. 기술 스택 선택 및 개발 환경 설정
- [ ] Python 버전 결정 (3.12.11)
- [ ] 필요 라이브러리 선택
  - GUI/트레이: PyQt6
  - 오디오: pyaudio
  - 전역 단축키: pynput
  - STT: openai-whisper (base model)
  - 클립보드: pyperclip
- [ ] requirements.txt 작성
- [ ] IDE 설정 및 기본 프로젝트 구조 생성

### 2. 프로젝트 구조 설계 및 기본 설정 파일 생성
- [ ] 프로젝트 폴더 구조 설계
  ```
  speech-to-text/
  ├── src/
  │   ├── main.py
  │   ├── audio_recorder.py
  │   ├── whisper_handler.py
  │   ├── hotkey_manager.py
  │   ├── tray_manager.py
  │   └── clipboard_manager.py
  ├── assets/
  │   └── icons/
  ├── config/
  │   └── settings.json
  ├── requirements.txt
  └── README.md
  ```
- [ ] 설정 파일 구조 정의 (JSON 또는 YAML)
- [ ] 로깅 설정 파일 생성
- [ ] 기본 상수 및 설정값 정의

### 3. 오디오 녹음 기능 구현
- [ ] 마이크 장치 탐지 및 선택 기능
- [ ] 실시간 오디오 스트림 캡처
- [ ] 오디오 데이터 임시 저장 (메모리 버퍼)
- [ ] 녹음 품질 설정 (샘플레이트, 비트깊이)
- [ ] 무음 감지 및 자동 종료 기능 (선택사항)
- [ ] 오디오 형식 변환 (Whisper 호환 형식)

### 4. 전역 단축키 처리 시스템 구현
- [ ] Ctrl+Alt+Space 조합 감지
- [ ] 키 누름/떼기 이벤트 처리
- [ ] OS별 권한 요청 처리
  - Windows: 관리자 권한 불필요
  - macOS: 접근성 권한 필요
  - Linux: X11/Wayland 호환성
- [ ] 단축키 충돌 방지 및 에러 처리
- [ ] 백그라운드 실행 최적화

### 5. 시스템 트레이 아이콘 및 메뉴 구현
- [ ] 트레이 아이콘 생성 및 표시
- [ ] 상태별 아이콘 변경
  - 대기 상태 (회색)
  - 녹음 중 (빨간색/애니메이션)
  - 처리 중 (노란색)
- [ ] 우클릭 컨텍스트 메뉴
  - 설정
  - 도움말
  - 종료
- [ ] 토글 기능 (일시 비활성화)
- [ ] 상태 툴팁 표시

### 6. OpenAI Whisper 모델 통합 및 음성-텍스트 변환
- [ ] Whisper 모델 다운로드 및 캐싱
- [ ] 모델 크기 선택 옵션 (tiny, base, small, medium, large)
- [ ] 오디오 파일을 Tensor로 변환
- [ ] 실시간 변환 처리 (비동기)
- [ ] 언어 자동 감지 또는 수동 설정
- [ ] 변환 정확도 향상 옵션
- [ ] GPU 가속 지원 (CUDA 사용 가능시)

### 7. 변환된 텍스트 클립보드 복사 기능 구현
- [ ] 텍스트 후처리 (공백, 구두점 정리)
- [ ] 클립보드 복사 기능
- [ ] 복사 완료 알림 (선택사항)
- [ ] 이전 클립보드 내용 백업/복원
- [ ] 텍스트 히스토리 기능 (최근 변환 결과 저장)

### 8. 에러 처리 및 로깅 시스템 구현
- [ ] 포괄적인 예외 처리
  - 마이크 접근 실패
  - 네트워크 오류
  - 모델 로딩 실패
  - 권한 부족
- [ ] 로그 파일 생성 및 관리
- [ ] 사용자 친화적 에러 메시지
- [ ] 자동 복구 메커니즘
- [ ] 디버그 모드 지원

### 9. 크로스 플랫폼 빌드 설정
- [ ] PyInstaller 또는 cx_Freeze 설정
- [ ] OS별 빌드 스크립트 작성
- [ ] 의존성 라이브러리 패키징
- [ ] 실행 파일 최적화 (크기 줄이기)
- [ ] 설치 프로그램 생성 (NSIS, DMG, DEB)

### 10. 성능 최적화 및 테스트
- [ ] 메모리 사용량 프로파일링
- [ ] CPU 사용량 최적화
- [ ] 응답 시간 측정 및 개선
- [ ] 메모리 누수 검사
- [ ] 장시간 실행 안정성 테스트
- [ ] 다양한 오디오 환경에서 테스트
- [ ] 사용자 인터페이스 테스트

